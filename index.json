{"repository_name":"github.com/shootingfly/jbuilder","body":"# Jbuilder\n[![GitHub release](https://img.shields.io/github/release/shootingfly/jbuilder.svg)](https://github.com/shootingfly/jbuilder/releases)\n\nGenerate JSON objects with a Builder-style DSL, inspired by jbuilder (<https://github.com/rails/jbuilder>)\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n   ```yaml\n   dependencies:\n     jbuilder:\n       github: shootingfly/jbuilder\n   ```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"jbuilder\"\nrequire \"json\"\n```\n\nFirst, write down the code.\n```crystal\nJbuilder.new do |json|\n  json.null nil\n  json.code 200\n  json.msg \"ok\"\n  json.merge!({\"code\" => 201})\n  json.array! \"array1\", [1, 1.0, \"1\"]\n  json.array!(\"array2\", [1, 2, 3, 4]) do |json, item|\n    json.code item\n  end\n  json.data do |json|\n    json.code 400\n    json.array! \"array3\", [1, 1.0, \"1\"]\n  end\n  json.set!(\"custom_field\", %w[1 2])\nend.to_json\n```\n\nThen you can see, \n```json\n{\n  \"null\":null,\n  \"code\":201,\n  \"msg\":\"ok\",\n  \"array1\":[\n    1,\n    1.0,\n    \"1\"\n  ],\n  \"array2\":[\n    {\n      \"code\":1\n    },\n    {\n      \"code\":2\n    },\n    {\n      \"code\":3\n    },\n    {\n      \"code\":4\n    }\n  ],\n  \"data\":{\n    \"code\":400,\n    \"array3\":[\n      1,\n      1.0,\n      \"1\"\n    ]\n  },\n  \"custom_field\":[\n    \"1\",\n    \"2\"\n  ]\n}\n```\n\n## An exmaple for Kemal\nhttps://github.com/shootingfly/kemal-jbuilder-example\n\n## Changelog\n+ **v0.2.0**\n  + Support Kilt\n  + Support Crystal 0.31.1\n+ **v0.1.0**\n  + First Release\n\n## Contributing\n\n1. Fork it (<https://github.com/shootingfly/jbuilder/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Shooting Fly](https://github.com/shootingfly) - creator and maintainer\n","program":{"html_id":"github.com/shootingfly/jbuilder/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/shootingfly/jbuilder","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/shootingfly/jbuilder/Jbuilder","path":"Jbuilder.html","kind":"class","full_name":"Jbuilder","name":"Jbuilder","abstract":false,"superclass":{"html_id":"github.com/shootingfly/jbuilder/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/shootingfly/jbuilder/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/shootingfly/jbuilder/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"jbuilder/version.cr","line_number":1,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder/version.cr"},{"filename":"jbuilder/embed.cr","line_number":1,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder/embed.cr"},{"filename":"jbuilder.cr","line_number":5,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr"}],"repository_name":"github.com/shootingfly/jbuilder","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.2.0\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(result=Hash(String,BasicObject).new)-class-method","html_id":"new(result=Hash(String,BasicObject).new)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"result","doc":null,"default_value":"Hash(String, BasicObject).new","external_name":"result","restriction":""}],"args_string":"(result = <span class=\"t\">Hash</span>(<span class=\"t\">String</span>, <span class=\"t\">BasicObject</span>).<span class=\"k\">new</span>)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L10","def":{"name":"new","args":[{"name":"result","doc":null,"default_value":"Hash(String, BasicObject).new","external_name":"result","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(result)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(&block):Hash-class-method","html_id":"new(&amp;block):Hash-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&block) : Hash","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L13","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"Hash","visibility":"Public","body":"new.tap do |json|\n  yield json\nend.to_h"}}],"instance_methods":[{"id":"array!(key:String,array:Array)-instance-method","html_id":"array!(key:String,array:Array)-instance-method","name":"array!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"array","doc":null,"default_value":"","external_name":"array","restriction":"Array"}],"args_string":"(key : String, array : Array)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L27","def":{"name":"array!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"array","doc":null,"default_value":"","external_name":"array","restriction":"Array"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value = [] of BasicObject\narray.each do |item|\n  value << item\nend\n@result[key] = value\n"}},{"id":"array!(key:String,array:Array,&block)-instance-method","html_id":"array!(key:String,array:Array,&amp;block)-instance-method","name":"array!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"array","doc":null,"default_value":"","external_name":"array","restriction":"Array"}],"args_string":"(key : String, array : Array, &block)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L35","def":{"name":"array!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"array","doc":null,"default_value":"","external_name":"array","restriction":"Array"}],"double_splat":null,"splat_index":null,"yields":2,"block_arg":null,"return_type":"","visibility":"Public","body":"value = [] of BasicObject\narray.each do |item|\n  value << Jbuilder.new do |json|\n    yield json, item\n  end\nend\n@result[key] = value\n"}},{"id":"hash!(key:String,hash:Hash)-instance-method","html_id":"hash!(key:String,hash:Hash)-instance-method","name":"hash!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash"}],"args_string":"(key : String, hash : Hash)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L45","def":{"name":"hash!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value = {} of String => BasicObject\nhash.each do |k, v|\n  value[k] = v\nend\n@result[key] = value\n"}},{"id":"merge!(hash:Hash)-instance-method","html_id":"merge!(hash:Hash)-instance-method","name":"merge!","doc":null,"summary":null,"abstract":false,"args":[{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash"}],"args_string":"(hash : Hash)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L53","def":{"name":"merge!","args":[{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@result.merge!(hash)"}},{"id":"set!(key:String,value:Array)-instance-method","html_id":"set!(key:String,value:Array)-instance-method","name":"set!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Array"}],"args_string":"(key : String, value : Array)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L57","def":{"name":"set!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Array"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"array!(key, value)"}},{"id":"set!(key:String,value:Hash)-instance-method","html_id":"set!(key:String,value:Hash)-instance-method","name":"set!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Hash"}],"args_string":"(key : String, value : Hash)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L61","def":{"name":"set!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Hash"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"hash!(key, value)"}},{"id":"set!(key:String,value:BasicType)-instance-method","html_id":"set!(key:String,value:BasicType)-instance-method","name":"set!","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"BasicType"}],"args_string":"(key : String, value : BasicType)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L65","def":{"name":"set!","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"BasicType"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@result[key] = value"}},{"id":"to_h:Hash-instance-method","html_id":"to_h:Hash-instance-method","name":"to_h","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L69","def":{"name":"to_h","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash","visibility":"Public","body":"@result"}}],"macros":[{"id":"embed(filename,io_name)-macro","html_id":"embed(filename,io_name)-macro","name":"embed","doc":null,"summary":null,"abstract":false,"args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""},{"name":"io_name","doc":null,"default_value":"","external_name":"io_name","restriction":""}],"args_string":"(filename, io_name)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder/embed.cr#L2","def":{"name":"embed","args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""},{"name":"io_name","doc":null,"default_value":"","external_name":"io_name","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{{ io_name.id }}\n << \n{{ run(\"./embedder.cr\", filename) }}\n\n    \n{{ io_name.id }}\n\n  \n"}},{"id":"method_missing(call)-macro","html_id":"method_missing(call)-macro","name":"method_missing","doc":null,"summary":null,"abstract":false,"args":[{"name":"call","doc":null,"default_value":"","external_name":"call","restriction":""}],"args_string":"(call)","source_link":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr#L19","def":{"name":"method_missing","args":[{"name":"call","doc":null,"default_value":"","external_name":"call","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% if call.block %}\n      set!({{ call.name.stringify }}, Jbuilder.new {{ call.block }})\n    {% else %}\n      set!({{ call.name.stringify }}, {{ call.args.first }})\n    {% end %}\n\n  \n"}}],"types":[{"html_id":"github.com/shootingfly/jbuilder/Jbuilder/BasicObject","path":"Jbuilder/BasicObject.html","kind":"alias","full_name":"Jbuilder::BasicObject","name":"BasicObject","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"jbuilder.cr","line_number":8,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr"}],"repository_name":"github.com/shootingfly/jbuilder","program":false,"enum":false,"alias":true,"aliased":"(Array(Jbuilder::BasicObject) | Bool | Float32 | Float64 | Hash(String, Jbuilder::BasicObject) | Int128 | Int16 | Int32 | Int64 | Int8 | String | Time | UInt128 | UInt16 | UInt32 | UInt64 | UInt8 | Nil)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/shootingfly/jbuilder/Jbuilder","kind":"class","full_name":"Jbuilder","name":"Jbuilder"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/shootingfly/jbuilder/Jbuilder/BasicType","path":"Jbuilder/BasicType.html","kind":"alias","full_name":"Jbuilder::BasicType","name":"BasicType","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"jbuilder.cr","line_number":7,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr"}],"repository_name":"github.com/shootingfly/jbuilder","program":false,"enum":false,"alias":true,"aliased":"(Bool | Float32 | Float64 | Int128 | Int16 | Int32 | Int64 | Int8 | String | Time | UInt128 | UInt16 | UInt32 | UInt64 | UInt8 | Nil)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/shootingfly/jbuilder/Jbuilder","kind":"class","full_name":"Jbuilder","name":"Jbuilder"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/shootingfly/jbuilder/Jbuilder/Integer","path":"Jbuilder/Integer.html","kind":"alias","full_name":"Jbuilder::Integer","name":"Integer","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"jbuilder.cr","line_number":6,"url":"https://github.com/shootingfly/jbuilder/blob/61e8ee3268be0df4d5f40afaf9b516263242ad49/src/jbuilder.cr"}],"repository_name":"github.com/shootingfly/jbuilder","program":false,"enum":false,"alias":true,"aliased":"(Int128 | Int16 | Int32 | Int64 | Int8 | UInt128 | UInt16 | UInt32 | UInt64 | UInt8)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/shootingfly/jbuilder/Jbuilder","kind":"class","full_name":"Jbuilder","name":"Jbuilder"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}}